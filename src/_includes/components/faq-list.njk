{#
  Reusable FAQ List Component

  Parameters (set via componentData variable):
  - title: Section title to display
  - faqs: Array of FAQ objects or FAQ keys
  - mode: Display mode - "list" (default) or "accordion"
  - showAdminIndicators: Optional boolean to show admin indicators (default: false)
  - categoryClass: Optional CSS class for styling variations

  Usage Examples:

  1. Basic list mode (default):
  {% set componentData = {
    title: "Getting Started",
    faqs: ["faq/basics/intro", "faq/basics/setup"]
  } %}
  {% include "components/faq-list.njk" %}

  2. Accordion mode:
  {% set componentData = {
    title: "Advanced Topics",
    faqs: faqObjects,
    mode: "accordion",
    showAdminIndicators: true
  } %}
  {% include "components/faq-list.njk" %}

  3. List mode with custom styling:
  {% set componentData = {
    title: "Special Category",
    faqs: specialFaqs,
    mode: "list",
    categoryClass: "special-category"
  } %}
  {% include "components/faq-list.njk" %}
#}

{% set mode = componentData.mode or "list" %}
{% set isAccordion = mode == "accordion" %}

<section class="faq-category faq-category--{{ mode }}{{ ' ' + componentData.categoryClass if componentData.categoryClass }}">
  <h2 class="category-title">{{ componentData.title }}</h2>

  <div class="faq-items">
    {% for faq in componentData.faqs %}
      {# Handle both FAQ objects and FAQ keys #}
      {% if faq.url %}
        {% set faqObj = faq %}
        {% set faqKey = faq.filename | replace('.md', '') %}
      {% else %}
        {% set faqObj = orcwgImport.faq[faq] %}
        {% set faqKey = faq %}
      {% endif %}

      <div class="faq-item"{% if isAccordion %} data-faq-key="{{ faqKey }}"{% endif %}>
        {% if isAccordion %}
          <button class="faq-trigger" onclick="toggleAccordion(this)">
            <span class="question-text">{{ faqObj.question | markdown | safe }}</span>
            <span class="accordion-icon">‚ñº</span>
            <div class="admin-indicators" style="display: {{ 'block' if componentData.showAdminIndicators else 'none' }};">
              <span class="status-indicator status-{{ faqObj.status }}"></span>
            </div>
          </button>
        {% else %}
          <a href="{{ faqObj.url }}" class="faq-trigger">
            <span class="question-text">
              {{ faqObj.question | markdown | safe }}
              <div class="admin-indicators" style="display: {{ 'block' if componentData.showAdminIndicators else 'none' }};">
                <span class="status-indicator status-{{ faqObj.status }}"></span>
              </div>
            </span>
          </a>
        {% endif %}

        {% if isAccordion %}
          <div class="faq-content">
            <div class="faq-answer">
              {{ faqObj.answer | markdown | safe }}
            </div>

            {% if faqObj.Status == "draft" %}
            <div class="faq-status-display">
              <p><strong>‚ö†Ô∏è This FAQ is a draft</strong> - it hasn't been reviewed by the FAQ Task Force. The answer may be incomplete or incorrect.</p>
            </div>
            {% endif %}

            {% if faqObj.guidanceKey %}
            {% set guidance = orcwgImport.guidance[faqObj.guidanceKey] %}
            <div class="faq-status-display">
              <p><strong>üõë Pending Guidance</strong></p>
              {% if guidance and guidance.summary %}
                <div class="guidance-content">
                  <p>This FAQ awaits commission guidance on:</p>
                  <p class="guidance-phrase">{{ guidance.summary }}</p>
                </div>
                <div class="guidance-actions">
                  <a href="/pending-guidance/{{ faqObj.guidanceKey }}/" class="guidance-link">View full guidance request ‚Üí</a>
                </div>
              {% else %}
                <p>This FAQ awaits commission guidance.</p>
              {% endif %}
            </div>
            {% endif %}

            <div class="faq-admin-info" style="display: {{ 'block' if componentData.showAdminIndicators else 'none' }};">
              {% if faqObj.guidanceKey %}
              <div class="pending-guidance-link">
                <strong>üõë Related Pending Guidance:</strong> <a href="/pending-guidance/{{ faqObj.guidanceKey }}/">{{ faqObj.guidanceKey | replace('-', ' ') | title }}</a>
                <p><em>This FAQ is affected by pending guidance that is currently being developed.</em></p>
              </div>
              {% endif %}

              {% if faqObj["Related issue"] %}
              <div class="related-issue">
                <strong>Related issue:</strong> <a href="{{ faqObj["Related issue"] }}">{{ faqObj["Related issue"] }}</a>
              </div>
              {% endif %}

              <div class="edit-on-github">
                <span class="edit-icon">‚úèÔ∏è</span>
                <a href="{{ faqObj.githubEditUrl }}" target="_blank" rel="noopener">Edit this FAQ on GitHub</a>
              </div>

              <div class="faq-link">
                <a href="{{ faqObj.url }}" class="standalone-link">üìÑ View standalone page</a>
              </div>
            </div>
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</section>